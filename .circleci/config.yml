version: 2.1

# This configuration determines what workflows to run based on changed files.
# It can only have one workflow – all others must be in `continue_config.yml`.
setup: true

orbs:
  path-filtering: circleci/path-filtering@0.1.1

workflows:
    generate-config:
      jobs:
        - path-filtering/filter:
            base-revision: main
            config-path: .circleci/continue_config.yml
            mapping: |
              (wagtail/.*|setup\.py|setup\.cfg) backend true
              (client/.*|docs/_static/.*|gulpfile.js/.*|wagtail/.*/static_src/.*|.eslintrc|.nvmrc|.stylelintrc.yaml|package.json|package-lock.json|tsconfig.json) frontend true
